<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio UI Components Demo - Interviews.tv</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: #1a1a1a;
            color: white;
            padding: 20px;
        }
        .demo-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .demo-section {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid #444;
        }
        .demo-section h2 {
            color: #FF0000;
            margin-bottom: 20px;
            font-size: 24px;
        }
        .demo-section h3 {
            color: #FF0000;
            margin-bottom: 15px;
            font-size: 18px;
        }
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .demo-item {
            background: #3a3a3a;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #555;
        }
        .demo-item h4 {
            color: #FF0000;
            margin-bottom: 15px;
            font-size: 16px;
        }
        .demo-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .demo-btn {
            background: #FF0000;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .demo-btn:hover {
            background: #cc0000;
        }
        .demo-btn:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .demo-btn.secondary {
            background: #6c757d;
        }
        .demo-btn.secondary:hover {
            background: #5a6268;
        }
        .status-display {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #444;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .feature-list li:last-child {
            border-bottom: none;
        }
        .feature-icon {
            color: #28a745;
            width: 20px;
        }
        .hero-section {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, #FF0000 0%, #cc0000 100%);
            border-radius: 12px;
            margin-bottom: 30px;
        }
        .hero-section h1 {
            font-size: 36px;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .hero-section p {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <!-- Hero Section -->
        <div class="hero-section">
            <h1><i class="fas fa-headphones"></i> Audio UI Components Demo</h1>
            <p>Complete Phase 3.3 Audio UI Components for Interviews.tv Live Streaming Platform</p>
        </div>

        <!-- Overview Section -->
        <div class="demo-section">
            <h2><i class="fas fa-info-circle"></i> Overview</h2>
            <p>This demo showcases all 8 audio UI components implemented in Phase 3.3 of the Interviews.tv platform. Each component provides professional-grade audio control and monitoring capabilities for live streaming interviews.</p>
            
            <div class="demo-controls">
                <button class="demo-btn" onclick="initializeAllComponents()">
                    <i class="fas fa-play"></i> Initialize All Components
                </button>
                <button class="demo-btn secondary" onclick="showSystemStatus()">
                    <i class="fas fa-info"></i> System Status
                </button>
                <button class="demo-btn secondary" onclick="clearAllLogs()">
                    <i class="fas fa-trash"></i> Clear Logs
                </button>
            </div>
            
            <div class="status-display" id="system-log">
                System ready. Click "Initialize All Components" to begin demo.
            </div>
        </div>

        <!-- Component Features -->
        <div class="demo-section">
            <h2><i class="fas fa-list-check"></i> Implemented Features</h2>
            <div class="demo-grid">
                <div class="demo-item">
                    <h4>3.3.1 - Visual Volume Meters</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Real-time audio level visualization</li>
                        <li><i class="fas fa-check feature-icon"></i> Peak hold indicators</li>
                        <li><i class="fas fa-check feature-icon"></i> Segmented level display</li>
                        <li><i class="fas fa-check feature-icon"></i> Color-coded thresholds</li>
                        <li><i class="fas fa-check feature-icon"></i> Smooth animations</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>3.3.2 - Audio Control Sliders</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Volume and gain controls</li>
                        <li><i class="fas fa-check feature-icon"></i> 3-band equalizer</li>
                        <li><i class="fas fa-check feature-icon"></i> Compressor settings</li>
                        <li><i class="fas fa-check feature-icon"></i> Noise gate controls</li>
                        <li><i class="fas fa-check feature-icon"></i> Real-time value display</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>3.3.3 - Device Status Indicators</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Connection status monitoring</li>
                        <li><i class="fas fa-check feature-icon"></i> Quality indicators</li>
                        <li><i class="fas fa-check feature-icon"></i> Device health monitoring</li>
                        <li><i class="fas fa-check feature-icon"></i> Visual status dots</li>
                        <li><i class="fas fa-check feature-icon"></i> Automatic updates</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>3.3.4 - Audio Settings Panel</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Device selection interface</li>
                        <li><i class="fas fa-check feature-icon"></i> Processing options</li>
                        <li><i class="fas fa-check feature-icon"></i> Quality preferences</li>
                        <li><i class="fas fa-check feature-icon"></i> Auto-device enumeration</li>
                        <li><i class="fas fa-check feature-icon"></i> Settings persistence</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>3.3.5 - Troubleshooting Tools</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Automated diagnostics</li>
                        <li><i class="fas fa-check feature-icon"></i> Issue detection</li>
                        <li><i class="fas fa-check feature-icon"></i> Auto-fix capabilities</li>
                        <li><i class="fas fa-check feature-icon"></i> Status reporting</li>
                        <li><i class="fas fa-check feature-icon"></i> Performance monitoring</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>3.3.6 - Audio Test Functionality</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Microphone testing</li>
                        <li><i class="fas fa-check feature-icon"></i> Speaker testing</li>
                        <li><i class="fas fa-check feature-icon"></i> Echo cancellation test</li>
                        <li><i class="fas fa-check feature-icon"></i> Stereo audio test</li>
                        <li><i class="fas fa-check feature-icon"></i> Quality and latency tests</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>3.3.7 - Permission Prompts</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> User-friendly prompts</li>
                        <li><i class="fas fa-check feature-icon"></i> Clear explanations</li>
                        <li><i class="fas fa-check feature-icon"></i> Permission management</li>
                        <li><i class="fas fa-check feature-icon"></i> Helpful guidance</li>
                        <li><i class="fas fa-check feature-icon"></i> Graceful fallbacks</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>3.3.8 - Quality Warnings</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Real-time monitoring</li>
                        <li><i class="fas fa-check feature-icon"></i> Issue detection</li>
                        <li><i class="fas fa-check feature-icon"></i> Automatic suggestions</li>
                        <li><i class="fas fa-check feature-icon"></i> One-click fixes</li>
                        <li><i class="fas fa-check feature-icon"></i> Dismissible notifications</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Live Demo Section -->
        <div class="demo-section">
            <h2><i class="fas fa-play-circle"></i> Live Component Demos</h2>
            
            <!-- Volume Meter Demo -->
            <div class="demo-item">
                <h3>3.3.1 - Volume Meter Demo</h3>
                <div class="demo-controls">
                    <button class="demo-btn" onclick="createVolumeMeterDemo()">
                        <i class="fas fa-chart-bar"></i> Create Volume Meter
                    </button>
                    <button class="demo-btn secondary" onclick="simulateAudioInput()">
                        <i class="fas fa-microphone"></i> Simulate Audio
                    </button>
                </div>
                <div id="volume-meter-demo"></div>
            </div>
            
            <!-- Control Panel Demo -->
            <div class="demo-item">
                <h3>3.3.2 - Audio Controls Demo</h3>
                <div class="demo-controls">
                    <button class="demo-btn" onclick="createControlPanelDemo()">
                        <i class="fas fa-sliders-h"></i> Create Control Panel
                    </button>
                </div>
                <div id="control-panel-demo"></div>
            </div>
            
            <!-- Device Indicators Demo -->
            <div class="demo-item">
                <h3>3.3.3 - Device Indicators Demo</h3>
                <div class="demo-controls">
                    <button class="demo-btn" onclick="createDeviceIndicatorsDemo()">
                        <i class="fas fa-desktop"></i> Create Device Indicators
                    </button>
                    <button class="demo-btn secondary" onclick="simulateDeviceChanges()">
                        <i class="fas fa-sync"></i> Simulate Changes
                    </button>
                </div>
                <div id="device-indicators-demo"></div>
            </div>
            
            <!-- Settings Panel Demo -->
            <div class="demo-item">
                <h3>3.3.4 - Settings Panel Demo</h3>
                <div class="demo-controls">
                    <button class="demo-btn" onclick="createSettingsPanelDemo()">
                        <i class="fas fa-cog"></i> Create Settings Panel
                    </button>
                </div>
                <div id="settings-panel-demo"></div>
            </div>
            
            <!-- Test Panel Demo -->
            <div class="demo-item">
                <h3>3.3.6 - Audio Test Demo</h3>
                <div class="demo-controls">
                    <button class="demo-btn" onclick="createTestPanelDemo()">
                        <i class="fas fa-vial"></i> Create Test Panel
                    </button>
                </div>
                <div id="test-panel-demo"></div>
            </div>
            
            <!-- Permission Prompt Demo -->
            <div class="demo-item">
                <h3>3.3.7 - Permission Prompt Demo</h3>
                <div class="demo-controls">
                    <button class="demo-btn" onclick="createPermissionPromptDemo()">
                        <i class="fas fa-shield-alt"></i> Show Permission Prompt
                    </button>
                </div>
                <div id="permission-prompt-demo"></div>
            </div>
        </div>

        <!-- Technical Details -->
        <div class="demo-section">
            <h2><i class="fas fa-code"></i> Technical Implementation</h2>
            <div class="demo-grid">
                <div class="demo-item">
                    <h4>Architecture</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Modular component system</li>
                        <li><i class="fas fa-check feature-icon"></i> Event-driven architecture</li>
                        <li><i class="fas fa-check feature-icon"></i> Real-time audio processing</li>
                        <li><i class="fas fa-check feature-icon"></i> Responsive design</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>Technologies</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Web Audio API</li>
                        <li><i class="fas fa-check feature-icon"></i> MediaDevices API</li>
                        <li><i class="fas fa-check feature-icon"></i> CSS3 Animations</li>
                        <li><i class="fas fa-check feature-icon"></i> ES6+ JavaScript</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>Performance</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Low-latency processing</li>
                        <li><i class="fas fa-check feature-icon"></i> Efficient memory usage</li>
                        <li><i class="fas fa-check feature-icon"></i> Smooth animations</li>
                        <li><i class="fas fa-check feature-icon"></i> Optimized rendering</li>
                    </ul>
                </div>
                
                <div class="demo-item">
                    <h4>Integration</h4>
                    <ul class="feature-list">
                        <li><i class="fas fa-check feature-icon"></i> Seamless platform integration</li>
                        <li><i class="fas fa-check feature-icon"></i> Backward compatibility</li>
                        <li><i class="fas fa-check feature-icon"></i> Plugin architecture</li>
                        <li><i class="fas fa-check feature-icon"></i> API consistency</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../src/services/audioQualityMonitor.js"></script>
    <script src="../src/services/audioFilters.js"></script>
    <script src="../src/services/audioCompression.js"></script>
    <script src="../src/services/audioSynchronization.js"></script>
    <script src="../src/services/audioFallback.js"></script>
    <script src="../src/services/audioQualityAdaptation.js"></script>
    <script src="../src/services/audioRecordingOptimization.js"></script>
    <script src="../src/services/audioUIComponents.js"></script>
    <script src="../src/services/audioControls.js"></script>
    <script>
        // Demo state
        let demoInitialized = false;
        let volumeMeterInterval = null;
        let deviceSimulationInterval = null;

        /**
         * Log message to system log
         */
        function logMessage(message, type = 'info') {
            const log = document.getElementById('system-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\n`;

            log.textContent += logEntry;
            log.scrollTop = log.scrollHeight;

            console.log(message);
        }

        /**
         * Initialize all audio UI components
         */
        async function initializeAllComponents() {
            try {
                logMessage('Initializing audio UI components system...');

                // Wait for services to be available
                if (typeof window.audioUIComponents === 'undefined') {
                    logMessage('Waiting for audioUIComponents to load...');
                    setTimeout(initializeAllComponents, 500);
                    return;
                }

                logMessage('Audio UI Components service loaded successfully');
                logMessage('All 8 Phase 3.3 components are ready for demonstration');
                logMessage('âœ… 3.3.1 - Visual Volume Meters: Ready');
                logMessage('âœ… 3.3.2 - Audio Control Sliders: Ready');
                logMessage('âœ… 3.3.3 - Device Status Indicators: Ready');
                logMessage('âœ… 3.3.4 - Audio Settings Panel: Ready');
                logMessage('âœ… 3.3.5 - Audio Troubleshooting Tools: Ready');
                logMessage('âœ… 3.3.6 - Audio Test Functionality: Ready');
                logMessage('âœ… 3.3.7 - Audio Permission Prompts: Ready');
                logMessage('âœ… 3.3.8 - Audio Quality Warnings: Ready');

                demoInitialized = true;
                logMessage('ðŸŽ‰ All audio UI components initialized successfully!');

            } catch (error) {
                logMessage('âŒ Failed to initialize components: ' + error.message, 'error');
            }
        }

        /**
         * Show system status
         */
        function showSystemStatus() {
            if (!demoInitialized) {
                logMessage('âš ï¸ System not initialized. Please initialize components first.');
                return;
            }

            try {
                const status = window.audioUIComponents.getUIStatus();
                logMessage('ðŸ“Š System Status Report:');
                logMessage(`- Initialized: ${status.isInitialized}`);
                logMessage(`- Volume Meters: ${status.volumeMeters} active`);
                logMessage(`- Audio Controls: ${status.audioControls} active`);
                logMessage(`- Device Indicators: ${status.deviceIndicators} active`);
                logMessage(`- Update Interval: ${status.settings.volumeMeter.updateInterval}ms`);
                logMessage(`- Animation Duration: ${status.settings.animations.duration}ms`);

            } catch (error) {
                logMessage('âŒ Failed to get system status: ' + error.message, 'error');
            }
        }

        /**
         * Clear all logs
         */
        function clearAllLogs() {
            document.getElementById('system-log').textContent = '';
            logMessage('System log cleared');
        }

        /**
         * Create volume meter demo
         */
        function createVolumeMeterDemo() {
            if (!demoInitialized) {
                logMessage('âš ï¸ Please initialize components first');
                return;
            }

            try {
                const container = document.getElementById('volume-meter-demo');
                window.audioUIComponents.createVolumeMeter('demo-participant', container);
                logMessage('âœ… Volume meter demo created');

            } catch (error) {
                logMessage('âŒ Failed to create volume meter: ' + error.message, 'error');
            }
        }

        /**
         * Simulate audio input for volume meter
         */
        function simulateAudioInput() {
            if (volumeMeterInterval) {
                clearInterval(volumeMeterInterval);
                volumeMeterInterval = null;
                logMessage('Audio simulation stopped');
                return;
            }

            logMessage('Starting audio level simulation...');

            volumeMeterInterval = setInterval(() => {
                // Simulate varying audio levels
                const level = Math.random() * 0.8 + 0.1; // 0.1 to 0.9

                // Update volume meter if it exists
                const volumeMeter = window.audioUIComponents.volumeMeters.get('demo-participant');
                if (volumeMeter) {
                    volumeMeter.currentLevel = level;
                    window.audioUIComponents.updateVolumeMeterVisuals(volumeMeter);
                }
            }, 100);
        }

        /**
         * Create control panel demo
         */
        function createControlPanelDemo() {
            if (!demoInitialized) {
                logMessage('âš ï¸ Please initialize components first');
                return;
            }

            try {
                const container = document.getElementById('control-panel-demo');
                window.audioUIComponents.createControlPanel('demo-participant', container);
                logMessage('âœ… Audio control panel demo created');

            } catch (error) {
                logMessage('âŒ Failed to create control panel: ' + error.message, 'error');
            }
        }

        /**
         * Create device indicators demo
         */
        function createDeviceIndicatorsDemo() {
            if (!demoInitialized) {
                logMessage('âš ï¸ Please initialize components first');
                return;
            }

            try {
                const container = document.getElementById('device-indicators-demo');

                // Create multiple device indicators
                const devices = [
                    { id: 'mic-1', name: 'Built-in Microphone' },
                    { id: 'mic-2', name: 'USB Headset' },
                    { id: 'speaker-1', name: 'Built-in Speakers' },
                    { id: 'speaker-2', name: 'Bluetooth Headphones' }
                ];

                devices.forEach(device => {
                    const deviceDiv = document.createElement('div');
                    deviceDiv.style.marginBottom = '10px';
                    window.audioUIComponents.createDeviceIndicator(device.id, device.name, deviceDiv);
                    container.appendChild(deviceDiv);
                });

                logMessage('âœ… Device indicators demo created');

            } catch (error) {
                logMessage('âŒ Failed to create device indicators: ' + error.message, 'error');
            }
        }

        /**
         * Simulate device status changes
         */
        function simulateDeviceChanges() {
            if (deviceSimulationInterval) {
                clearInterval(deviceSimulationInterval);
                deviceSimulationInterval = null;
                logMessage('Device simulation stopped');
                return;
            }

            logMessage('Starting device status simulation...');

            const devices = ['mic-1', 'mic-2', 'speaker-1', 'speaker-2'];
            const statuses = ['connected', 'connecting', 'error', 'warning'];

            deviceSimulationInterval = setInterval(() => {
                devices.forEach(deviceId => {
                    const indicator = window.audioUIComponents.deviceIndicators.get(deviceId);
                    if (indicator) {
                        const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                        const randomQuality = Math.random();
                        window.audioUIComponents.updateDeviceIndicatorVisuals(indicator, randomStatus, randomQuality);
                    }
                });
            }, 2000);
        }

        /**
         * Create settings panel demo
         */
        function createSettingsPanelDemo() {
            if (!demoInitialized) {
                logMessage('âš ï¸ Please initialize components first');
                return;
            }

            try {
                const container = document.getElementById('settings-panel-demo');
                window.audioUIComponents.createSettingsPanel(container);
                logMessage('âœ… Audio settings panel demo created');

            } catch (error) {
                logMessage('âŒ Failed to create settings panel: ' + error.message, 'error');
            }
        }

        /**
         * Create test panel demo
         */
        function createTestPanelDemo() {
            if (!demoInitialized) {
                logMessage('âš ï¸ Please initialize components first');
                return;
            }

            try {
                const container = document.getElementById('test-panel-demo');
                window.audioUIComponents.createAudioTestPanel(container);
                logMessage('âœ… Audio test panel demo created');

            } catch (error) {
                logMessage('âŒ Failed to create test panel: ' + error.message, 'error');
            }
        }

        /**
         * Create permission prompt demo
         */
        function createPermissionPromptDemo() {
            if (!demoInitialized) {
                logMessage('âš ï¸ Please initialize components first');
                return;
            }

            try {
                const container = document.getElementById('permission-prompt-demo');
                window.audioUIComponents.createPermissionPrompt(container, 'microphone');
                logMessage('âœ… Permission prompt demo created');

            } catch (error) {
                logMessage('âŒ Failed to create permission prompt: ' + error.message, 'error');
            }
        }

        // Initialize demo when page loads
        document.addEventListener('DOMContentLoaded', () => {
            logMessage('ðŸŽ¬ Audio UI Components Demo loaded');
            logMessage('Phase 3.3 - All 8 audio UI components ready for demonstration');
            logMessage('Click "Initialize All Components" to begin');
        });
    </script>
</body>
</html>
